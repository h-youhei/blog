+++
title = "ラムネ。配列"
description = """
打鍵数の少なさ、小指・薬指の使用率の低さ、覚えやすさにこだわったかな入力
"""
date = 2019-11-02
toc = true
+++
{{< figure src="ramune-input.png"
	class="full" >}}

## 特徴
よく打つかなは単打なので打鍵効率がよい。<br>
そうでないかなは行段を組み合わせるので覚えやすく忘れにくい。

8割以上の入力を人差し指と中指で打つため疲れにくい。<br>
行と段のどちらを先に押しておくかで清音と濁音を打ち分けるので、
シフトに使うキーが行段方式にしては少なく済むことが関与している。同時打鍵と比べると、少しだけ余計にシフトに時間がかかるけど。

拗音と外来音を1動作で打ててリズムがいい。

人差し指と中指によるもの以外のアルペジオ(隣接高速打鍵)は、指への負担が大きいように感じるのであえて避けた。

親指を文字入力に使わないので親指シフト系列の配列だと親指が痛くなる人にもおすすめ。

## シフト方式
{{< figure src="ramune-input.png"
	class="full" >}}

配列図の各キー左上のカタカナがシフトの種類を表している。<br>
行(子音、左手側)を押しながら、段(母音、右手側)を押すと清音シフト<br>
段(母音、右手側)を押しながら、行(子音、左手側)を押すと濁音シフト

{{< table "seidaku.csv" >}}

「ラムネ。配列」という名前は清音シフトと濁音シフトに繋がりがない行の連想元となることを意図した。<br>
ラ行の濁音シフトはマ行<br>
ナ行の濁音シフトはパ行<br>

{{< table file="gyoudan.csv" caption="行段の組み合わせ一覧" v="t" >}}

## オプション
### 記号
30キー以外の記号は英数入力に準ずる。<br>
小指上下段の記号は各自でよく使う記号に入れ替える。
より多くの記号を割り当てたい場合は、ワ行の拗音および母音側の薬指と小指を使ったシフトを利用できる。

### シフトのずれ {#shifting-delay}
シフトのあるキーを高速打鍵すると単打2打にならずにシフト側の文字になってしまうことがある。対策として次のキーを押してから何ミリ秒以内にシフトキーが離されたら単打2打、そうでなければシフト扱いにする処理を組み込んでいる。<br>
意図せず単打になってしまう場合はシフトのずれを短くするとよい。<br>
意図せずシフトがかかってしまう場合はシフトのずれを長くするとよい。

### 句読点で確定 {#commit-at-punctuation}
句読点で変換と比較して、変換したくないときの手数が減り、変換したいときの手数は変わらない。
変換したいときは変換してから句読点を打つ。

### 練習モード
タイピングゲームで練習するときに使うことを想定したモード。<br>
IMEを起動せずにローマ字列をPCに送る。また、句読点での確定を無効化する。<br>
作者はFnキーを押しながら全角/半角キーを押すことで練習モードを切り替えている。

### 確定モード
かな文字に関する表を作るとき1文字ごとに確定するのは面倒。<br>
確定モード中は1文字打つごとに自動で確定する。<br>
作者はEnterキーと反対の手の人差し指ホーム段を押しながらEnterキーを押すことで確定モードを切り替えている。

## 使い方
### [qmk_firmware][qmk firmware]
[Ergodox EZでの実装例][qmk ergodox]を参考に移植してください。

kana.c, kana.h, kana_chord.c, kana_chord.h, util_user.c, util_user.hをコピーする。<br>
rules.mkのSRCにkana.c, kana_chord.c, util_user.cを追加する。

qwerty.hを参考にヘッダファイルを作成する。

qwerty.cを参考にkeymap.cを作成する。<br>
そのまま使う場合はファイル名をkeymap.cに変更する。

config.hを好みで書きかえる。<br>
SHIFTING_DELAYで[シフトのずれ](#shifting-delay)を設定できる。<br>
COMMIT_AT_PUNCTUATIONで[句読点で確定](#commit-at-punctuation)を有効にできる。

### ほかの方法で実装された方へ
[よろしければ連絡をください。](#comment)リンクを貼らせていただきます。

## 謝辞
[100万字日本語かなn-gramデータ][100man]を使わせていただきました。ありがとうございます。

多くの既存の配列を参考にさせていただきました。ありがとうございます。とくに影響を受けた配列を挙げさせていただきます。

- [新JIS配列][new jis]：単打面の配列
- [薙刀式][naginata]：人差し指と中指を重視すること
- [よだか配列][yodaka]：かな入力と行段入力の組み合わせ
- [けいならべ][keinarabe]：二重母音を打ちやすいように配置すること
<!--more-->
[qmk firmware]:https://github.com/qmk/qmk_firmware
[qmk ergodox]:https://github.com/h-youhei/qmk_keymap
[100man]:https://kouy.exblog.jp/9731073
[new jis]:https://ja.wikipedia.org/wiki/%E6%96%B0JIS%E9%85%8D%E5%88%97
[naginata]:http://oookaworks.seesaa.net/article/456099128.html
[yodaka]:https://github.com/semialt/yodaka
[keinarabe]:http://web1.nazca.co.jp/kouy/keinarabe/
